
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Doku zu Home Assistant und sonstigen smarten Basteleien">
      
      
      
        <meta name="author" content="saruter">
      
      
        <link rel="canonical" href="https://smarthome.ms1.de/projekte/solvis-heizung/">
      
      <link rel="shortcut icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>Solvis Heizung via Modbus auslesen und steuern - Smarthome Doku</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#solvis-heizung-via-modbus-auslesen-und-steuern" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://smarthome.ms1.de" title="Smarthome Doku" class="md-header-nav__button md-logo" aria-label="Smarthome Doku">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Smarthome Doku
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Solvis Heizung via Modbus auslesen und steuern
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/saruter/smarthome" title="Quellcode" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://smarthome.ms1.de" title="Smarthome Doku" class="md-nav__button md-logo" aria-label="Smarthome Doku">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>
    Smarthome Doku
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/saruter/smarthome" title="Quellcode" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home Assistant, ESP8266 und mehr...
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
      
      <label class="md-nav__link" for="nav-2">
        Projekte
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Projekte" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Projekte
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feinstaubsensor/" class="md-nav__link">
        Feinstaubsensor mit ESP8266 und Home Assistant
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gasverbrauch/" class="md-nav__link">
        Gaszähler mit ESP8266 und Home Assistant auslesen
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../halterung-unif-ac-pro/" class="md-nav__link">
        DIY Halterung für Unifi AC-Pro Accesspoint
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../lichtrahmen/" class="md-nav__link">
        DIY Lichtrahmen mit WLED und Home Assistant
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pixelclock/" class="md-nav__link">
        PixelClock, smarte LED Matrix
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sidewinder-x1-led-2/" class="md-nav__link">
        Artillery Sidewinder X1 LED Statusbeleuchtung
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Solvis Heizung via Modbus auslesen und steuern
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Solvis Heizung via Modbus auslesen und steuern
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#benotigte-hardware" class="md-nav__link">
    benötigte Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-assistant-ubersicht" class="md-nav__link">
    Home Assistant Übersicht
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#langzeitauswertung-mit-grafanainfluxdb" class="md-nav__link">
    Langzeitauswertung mit Grafana/InfluxDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aktivierung-modbus-protokoll" class="md-nav__link">
    Aktivierung Modbus Protokoll
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auszug-configurationyaml" class="md-nav__link">
    Auszug configuration.yaml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raumtemperatur-per-modbus-register-statt-raumbedienelement" class="md-nav__link">
    Raumtemperatur per Modbus-Register statt Raumbedienelement
  </a>
  
    <nav class="md-nav" aria-label="Raumtemperatur per Modbus-Register statt Raumbedienelement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#voraussetzungen" class="md-nav__link">
    Voraussetzungen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zyklisches-setzen-der-raumtemperatur-in-home-assistant" class="md-nav__link">
    zyklisches setzen der Raumtemperatur in Home Assistant
  </a>
  
    <nav class="md-nav" aria-label="zyklisches setzen der Raumtemperatur in Home Assistant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatisierung" class="md-nav__link">
    Automatisierung
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raumtemperaturanzeige-in-der-sc2" class="md-nav__link">
    Raumtemperaturanzeige in der SC2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stundenweises-umschalten-von-automatik-auf-standby-betrieb" class="md-nav__link">
    Stundenweises umschalten von Automatik auf Standby-Betrieb
  </a>
  
    <nav class="md-nav" aria-label="Stundenweises umschalten von Automatik auf Standby-Betrieb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#konfiguration-home-assistant" class="md-nav__link">
    Konfiguration Home-Assistant
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links-zu-solvis-doku" class="md-nav__link">
    Links zu Solvis Doku
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../stromverbrauch/" class="md-nav__link">
        (digitalen) Stromzähler mit ESP8266 auslesen
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tasterschaltung/" class="md-nav__link">
        Eltako Stromstoßrelais durch Shelly 1PM ersetzen
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../wasserverbrauch/" class="md-nav__link">
        Wasserzähler mit ESP32-Cam auslesen (Ai on the Edge)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#benotigte-hardware" class="md-nav__link">
    benötigte Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-assistant-ubersicht" class="md-nav__link">
    Home Assistant Übersicht
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#langzeitauswertung-mit-grafanainfluxdb" class="md-nav__link">
    Langzeitauswertung mit Grafana/InfluxDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aktivierung-modbus-protokoll" class="md-nav__link">
    Aktivierung Modbus Protokoll
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auszug-configurationyaml" class="md-nav__link">
    Auszug configuration.yaml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raumtemperatur-per-modbus-register-statt-raumbedienelement" class="md-nav__link">
    Raumtemperatur per Modbus-Register statt Raumbedienelement
  </a>
  
    <nav class="md-nav" aria-label="Raumtemperatur per Modbus-Register statt Raumbedienelement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#voraussetzungen" class="md-nav__link">
    Voraussetzungen
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zyklisches-setzen-der-raumtemperatur-in-home-assistant" class="md-nav__link">
    zyklisches setzen der Raumtemperatur in Home Assistant
  </a>
  
    <nav class="md-nav" aria-label="zyklisches setzen der Raumtemperatur in Home Assistant">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatisierung" class="md-nav__link">
    Automatisierung
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#raumtemperaturanzeige-in-der-sc2" class="md-nav__link">
    Raumtemperaturanzeige in der SC2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stundenweises-umschalten-von-automatik-auf-standby-betrieb" class="md-nav__link">
    Stundenweises umschalten von Automatik auf Standby-Betrieb
  </a>
  
    <nav class="md-nav" aria-label="Stundenweises umschalten von Automatik auf Standby-Betrieb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#konfiguration-home-assistant" class="md-nav__link">
    Konfiguration Home-Assistant
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links-zu-solvis-doku" class="md-nav__link">
    Links zu Solvis Doku
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="solvis-heizung-via-modbus-auslesen-und-steuern">Solvis Heizung via Modbus auslesen und steuern<a class="headerlink" href="#solvis-heizung-via-modbus-auslesen-und-steuern" title="Permanent link">&para;</a></h1>
<p>Eine <a href="https://www.solvis.de">Solvis Heizungsanlage</a>, hier SolvisMax, lässt sich mit Hilfe der optional erhältlichen <a href="https://www.solvis.de/solvisremote-ben-max/">Solvis Remote</a> fernsteuern. Die Solvis Remote bildet im Prinzip das Touchdisplay der Heizung 1:1 via Browser nach. Zusätzlich gibt es Graphen über den Temperaturverlauf der einzelnen Sensoren des Schichtenspeichers und die Möglichkeit, sich ein Anlagenschema darzustellen. </p>
<p>Für eine Integration ein ein bestehendes Smart Home System, hier <a href="https://www.home-assistant.io">Home Assistant</a>, bietet die Solvis Remote zusätzlich die Möglichkeit die Heizung mittels Modbus-TCP Protokoll lokal auslesen und, falls gewünscht, auch steuern zu können. </p>
<p>Vorbildlich ist die Bereitstellung aller Dokumentationen inkl. Modbus Register von Solvis auf deren Webseite. </p>
<h2 id="benotigte-hardware">benötigte Hardware<a class="headerlink" href="#benotigte-hardware" title="Permanent link">&para;</a></h2>
<ul>
<li>Solvis Heizung, hier SolvisMax 7</li>
<li>Solvis Control 2 (SC2)</li>
<li>Solvis Remote zur Anbindung ans Netzwerk und Bereitstellung des Modbus-TCP Protokolls</li>
</ul>
<h2 id="home-assistant-ubersicht">Home Assistant Übersicht<a class="headerlink" href="#home-assistant-ubersicht" title="Permanent link">&para;</a></h2>
<p>In Home Assistant wurde die Ansicht der Anlage auf der Solvis Remote nachgebildet
<img alt="Heizung Übersicht" src="../../img/hass-heizung-uebersicht.png" /></p>
<p>Zusätzlich gibt es eine Detail-Ansicht der einzelnen Sensoren und Stati.
<img alt="Heizung Sensoren" src="../../img/hass-heizung-detail.png" /></p>
<p>Klick auf die einzelnen Sensoren bringen die Historie des Sensors bzw. die Auswahlmöglichkeiten zur Steuerung, z.b. den HKR1-Betriebsmodus zu ändern</p>
<p><img alt="Heizung Detail1" src="../../img/hass-heizung-wwpuffer-history.png" /> 
<img alt="Heizung Detail2" src="../../img/hass-heizung-hkr1-betriebsart.png" /></p>
<h2 id="langzeitauswertung-mit-grafanainfluxdb">Langzeitauswertung mit Grafana/InfluxDB<a class="headerlink" href="#langzeitauswertung-mit-grafanainfluxdb" title="Permanent link">&para;</a></h2>
<p>Für Langzeitstatistiken werden die Daten von Home Assistant in einer InfluxDB Datenbank gespeichert und mittels Grafana visualisiert.
<img alt="Heizung Grafana" src="../../img/heizung-grafana.png" /></p>
<p>Für die monatliche Auswertung der Brennerstarts und Laufzeit des Brenners werden mit folgenden Queries die Daten ermittelt:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>SELECT spread(&quot;value&quot;) FROM &quot;Starts&quot; WHERE (&quot;entity_id&quot; = &#39;brennerstarts&#39;) AND time &gt; now()  - 365d GROUP BY time(30d) fill(null)

SELECT spread(&quot;value&quot;) FROM &quot;h&quot; WHERE (&quot;entity_id&quot; = &#39;laufzeit_brenner&#39;) AND time &gt; now() - 365d  GROUP BY time(30d) fill(null)
</code></pre></div>
</td></tr></table>
<h2 id="aktivierung-modbus-protokoll">Aktivierung Modbus Protokoll<a class="headerlink" href="#aktivierung-modbus-protokoll" title="Permanent link">&para;</a></h2>
<p>Zur Aktivierung von Modbus TCP muss in das Installateurmenü gewechselt werden. Den zugehörigen Code werde ich nicht veröffentlichen. Bitte mit dem Installateur der Heizung Kontakt aufnehmen. 
Im Menüpunkt <code>Sonstiges --&gt; Remote</code> auswählen und dort dann den Modus für <code>Modbus TCP</code> auf <code>lesen</code> oder auch <code>senden</code> (schreiben) einstellen.
Sollten die Einstellungen korrekt sein sollte unter der IP-Addresse der Solvis-Remote auf Port TCP/502 ein Connect möglich sein.</p>
<p><img alt="Solvis Remote1" src="../../img/solvis-remote-1.png" /></p>
<p><img alt="Solvis Remote2" src="../../img/solvis-remote-2.png" /></p>
<h2 id="auszug-configurationyaml">Auszug configuration.yaml<a class="headerlink" href="#auszug-configurationyaml" title="Permanent link">&para;</a></h2>
<p>Nachfolgend ein Auszug der configuration.yaml von Home Assistant mit den wichtigsten Sensoren und Templates</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="x">modbus:</span>
<span class="x">  - name: SolvisRemote</span>
<span class="x">    type: tcp</span>
<span class="x">    host: &lt;ip der solvis remote&gt;</span>
<span class="x">    port: 502</span>

<span class="x">    sensors:</span>
<span class="x">      - name: Warmwasserpuffer</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33024</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Warmwassertemperatur</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33025</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Speicherreferenztemperatur</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33026</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Heizungspuffertemperatur oben</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33027</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Aussentemperatur</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33033</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Heizungspuffertemperatur unten</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33032</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Zirkulationsdurchfluss</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33034</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Vorlauftemperatur</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33035</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Kaltwassertemperatur</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33038</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Durchfluss Warmwasserzirkualation</span>
<span class="x">        unit_of_measurement: l/min</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        scale: 0.1</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33041</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Laufzeit Brenner</span>
<span class="x">        unit_of_measurement: h</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33536</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Brennerstarts</span>
<span class="x">        unit_of_measurement: Starts </span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33537</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Brennerleistung</span>
<span class="x">        unit_of_measurement: kW</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33539</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: Ionisationsstrom</span>
<span class="x">        unit_of_measurement: mA </span>
<span class="x">        slave: 1</span>
<span class="x">        scale: 0.1</span>
<span class="x">        precision: 1</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33540</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: A01.Pumpe Zirkulation</span>
<span class="x">        slave: 1</span>
<span class="x">        unit_of_measurement: V</span>
<span class="x">        scale: 0.01</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33280</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: A02.Pumpe Warmwasser</span>
<span class="x">        slave: 1</span>
<span class="x">        unit_of_measurement: V</span>
<span class="x">        scale: 0.01</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33281</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: A03.Pumpe HK1</span>
<span class="x">        slave: 1</span>
<span class="x">        unit_of_measurement: V</span>
<span class="x">        scale: 0.01</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33282</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: A05.Pumpe Zirkulation</span>
<span class="x">        slave: 1</span>
<span class="x">        unit_of_measurement: V</span>
<span class="x">        scale: 0.01</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33284</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: A12.Brennerstatus</span>
<span class="x">        slave: 1</span>
<span class="x">        unit_of_measurement: V</span>
<span class="x">        scale: 0.01</span>
<span class="x">        precision: 0</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33291</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: WW Nachheizung 2322</span>
<span class="x">        slave: 1</span>
<span class="x">        #unit_of_measurement: V</span>
<span class="x">        #scale: 0.01</span>
<span class="x">        #precision: 0</span>
<span class="x">        input_type: holding</span>
<span class="x">        address: 2322</span>
<span class="x">        scan_interval: 30</span>

<span class="x">      - name: HKR1 Betriebsart</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: holding</span>
<span class="x">        address: 2818</span>
<span class="x">        scan_interval: 30  </span>


<span class="x"># ab hier 300 Sekunden Poll Interval    </span>

<span class="x">      - name: HKR1 Absenktemperatur Nacht</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: holding</span>
<span class="x">        address: 2821</span>
<span class="x">        scan_interval: 300</span>

<span class="x">      - name: HKR1 Solltemperatur Tag</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: holding</span>
<span class="x">        address: 2820</span>
<span class="x">        scan_interval: 300</span>

<span class="x">      - name: DigIn Stoerungen</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 33045</span>
<span class="x">        scan_interval: 300</span>

<span class="x">      - name: WW Solltemperatur</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: holding</span>
<span class="x">        address: 2305</span>
<span class="x">        scan_interval: 300</span>

<span class="x">      - name: VersionSC2</span>
<span class="x">        slave: 1</span>
<span class="x">        scale: 0.01</span>
<span class="x">        precision: 2</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 32770</span>
<span class="x">        scan_interval: 300</span>

<span class="x">      - name: VersionNBG</span>
<span class="x">        slave: 1</span>
<span class="x">        scale: 0.01</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 32771</span>
<span class="x">        scan_interval: 300</span>

<span class="x">      - name: ZirkulationBetriebsart</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: input</span>
<span class="x">        address: 2049</span>
<span class="x">        scan_interval: 300</span>


<span class="x">      - name: Raumtemperatur_HKR1</span>
<span class="x">        unit_of_measurement: °C</span>
<span class="x">        scale: 0.1</span>
<span class="x">        slave: 1</span>
<span class="x">        input_type: holding</span>
<span class="x">        address: 34304</span>
<span class="x">        scan_interval: 300</span>




<span class="x">sensor:     </span>
<span class="x">  - platform: template</span>
<span class="x">    sensors:</span>
<span class="x">      ww_zirkulationsart:</span>
<span class="x">        friendly_name: &quot;WW Zirkulation Betriebsart&quot;</span>
<span class="x">        #entity_id: sensor.zirkulationbetriebsart</span>
<span class="x">        value_template: &gt;-</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">states</span><span class="o">(</span><span class="s1">&#39;sensor.zirkulationbetriebsart&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">              Aus</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states</span><span class="o">(</span><span class="s1">&#39;sensor.zirkulationbetriebsart&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">              Puls</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states</span><span class="o">(</span><span class="s1">&#39;sensor.zirkulationbetriebsart&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">              Temp</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states</span><span class="o">(</span><span class="s1">&#39;sensor.zirkulationbetriebsart&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="s1">&#39;4&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">              Warten</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">              unbekannt</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>


<span class="x">      hkr1betriebsart:</span>
<span class="x">        friendly_name: &quot;Heizkreislauf Betriebsart&quot;</span>
<span class="x">        #entity_id: sensor.hkr1_betriebsart</span>
<span class="x">        value_template: &quot;</span><span class="cp">{%</span><span class="k">if</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span> <span class="cp">%}</span><span class="x">Aus</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span> <span class="cp">%}</span><span class="x">Automatik</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span> <span class="cp">%}</span><span class="x">Tagbetrieb</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;4&#39;</span> <span class="cp">%}</span><span class="x">Absenkbetrieb</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;5&#39;</span> <span class="cp">%}</span><span class="x">Standby</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;6&#39;</span> <span class="cp">%}</span><span class="x">Eco</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;7&#39;</span> <span class="cp">%}</span><span class="x">Urlaub</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;8&#39;</span> <span class="cp">%}</span><span class="x">WW Vorang</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.zirkulationbetriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;9&#39;</span> <span class="cp">%}</span><span class="x">Frostschutz</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.zirkulationbetriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;10&#39;</span> <span class="cp">%}</span><span class="x">Pumpenschutz</span><span class="cp">{%</span> <span class="k">elif</span> <span class="nv">states.sensor.hkr1_betriebsart.state</span> <span class="o">==</span> <span class="s1">&#39;11&#39;</span> <span class="cp">%}</span><span class="x">Estrich</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x">&quot;</span>
</code></pre></div>
</td></tr></table>
<h2 id="raumtemperatur-per-modbus-register-statt-raumbedienelement">Raumtemperatur per Modbus-Register statt Raumbedienelement<a class="headerlink" href="#raumtemperatur-per-modbus-register-statt-raumbedienelement" title="Permanent link">&para;</a></h2>
<p>Normalerweise wird über das (optionale) Raumbedienelement die Raumtemperatur an die Solvis Control2 (SC2) gemeldet. Dadurch kann die Heizung die Regelung an die erreichte Raumtemperatur anpassen.</p>
<p>Da im Haus keine einfache Verkabelung des Raumbedienelements möglich war, es aber ein Modbus Register 34304 (Raumtemperatur 1) gibt, war die Idee geboren die Raumtemperatur über die in Home Assistant vorhandenen Zigbee Temperatursensoren per Modbus in das Register zu schreiben, was zunächst fehlschlug, trotz aktiviertem schreibenden Modbus-Zugriff. Allerdings war zu dem Zeitpunkt die SC2 noch nicht für ein Raumbedienelement eingerichtet.</p>
<p>Nach Kontaktaufnahme mit Solvis bekam ich die Infos dir mir fehlten. Vielen Dank hierfür an <a href="https://github.com/saruter/smarthome/issues/1">Wolf Walter</a></p>
<h3 id="voraussetzungen">Voraussetzungen<a class="headerlink" href="#voraussetzungen" title="Permanent link">&para;</a></h3>
<ul>
<li>Solvis Control muss mit Raumbedienelement für den Heizkreislauf konfiguriert sein (auch wenn kein Raumbedienelement per Kabel angeschlossen wird)</li>
<li>dafür ist ein Zurücksetzen der Solvis Control auf Werkseinstellung nötig, da in der Initialisierung das Raumbedienelement zum Heizkreislauf zugeordnet wird</li>
<li>Anschließend muss im Installateur-Menü unter <code>Sonstiges --&gt; Remote --&gt; Seite 3 --&gt; Raumfühler HK1</code> auf <code>Modbus</code> umgestellt werden
<img alt="Remote-HKR1-Raumfühler-Modbus" src="../../img/solvis-remote-raumtemp-modbus.png" /></li>
<li>und der Modbus-Modus muss auf <code>senden</code> was dem schreibenden Zugriff entspricht umgestellt werden, falls noch nicht geschehen</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Hinweis</p>
<p>Die Temperatur muss ca. alle 60 Sekunden per Modbus in das Register geschrieben werden, sonst "verschwindet" die Temperatur in der Anzeige und zeigt nur noch "--"</p>
</div>
<h3 id="zyklisches-setzen-der-raumtemperatur-in-home-assistant">zyklisches setzen der Raumtemperatur in Home Assistant<a class="headerlink" href="#zyklisches-setzen-der-raumtemperatur-in-home-assistant" title="Permanent link">&para;</a></h3>
<p>Eine Automatisierung schreibt den Sensorwert eines Zigbee Temperatursensors alle 30 Sekunden in das Modbus Register.</p>
<p>Dazu muss der Wert des Sensors konvertiert werden, da das Modbus-Register den Wert in 0.1°C skaliert erwartet. Zudem muss der Wert in ein <code>int</code> gewandelt werden da der <code>modbus.write_register</code>-Service ein <code>int</code> erwartet.</p>
<h4 id="automatisierung">Automatisierung<a class="headerlink" href="#automatisierung" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="x">  - alias: Heizung Raumtemperatur per Modbus aktualisieren</span>
<span class="x">    trigger:</span>
<span class="x">      platform: time_pattern</span>
<span class="x">      seconds: &quot;/30&quot;</span>
<span class="x">    action:</span>
<span class="x">    - service: modbus.write_register</span>
<span class="x">      data_template:</span>
<span class="x">        address: 34304</span>
<span class="x">        hub: SolvisRemote</span>
<span class="x">        unit: 1</span>
<span class="x">        value: &quot;</span><span class="cp">{{</span> <span class="o">(</span><span class="nv">states</span><span class="o">(</span><span class="s1">&#39;sensor.temperatur_wohnzimmer&#39;</span><span class="o">)</span> <span class="o">|</span> <span class="nf">float</span> <span class="o">*</span> <span class="m">10</span><span class="o">)</span> <span class="o">|</span> <span class="nf">int</span> <span class="cp">}}</span><span class="x">&quot;</span>
</code></pre></div>
</td></tr></table>
<h3 id="raumtemperaturanzeige-in-der-sc2">Raumtemperaturanzeige in der SC2<a class="headerlink" href="#raumtemperaturanzeige-in-der-sc2" title="Permanent link">&para;</a></h3>
<p>Bei erfolgreichem setzen der Temperatur erscheint diese in der Solvis Control
<img alt="Remote-Raumtemp1" src="../../img/solvis-raumtemp-startseite.png" /></p>
<p><img alt="Remote-Raumtemp2" src="../../img/solvis-raumtemp-anlagenstatus.png" /></p>
<h2 id="stundenweises-umschalten-von-automatik-auf-standby-betrieb">Stundenweises umschalten von Automatik auf Standby-Betrieb<a class="headerlink" href="#stundenweises-umschalten-von-automatik-auf-standby-betrieb" title="Permanent link">&para;</a></h2>
<p>Gerade in der Übergangszeit kann es vorkommen, dass an sonnigen Tagen trotz noch kühler Außentemperatur es in den Zimmern durch die Sonneneinstrahlung bereits warm ist. Die Heizung aber noch wegen der kühlen Außentemperatur weiterhin läuft bis auch die Außentemperatur entsprechend später am Tag steigt.</p>
<p>Hier wäre ein Nutzungsszenario für folgende Automatisierung:
Schalte den Heizkreis auf Standby-Modus für x-Stunden (z.B. bis Abends).</p>
<p><img alt="stundenweises Standby HKR1" src="../../img/hass-heizung-automate-standby.png" /></p>
<p>Realisiert ist dies über einen <code>timer</code> in Home-Assistant, dessen Zeitwert (Stunden) per <code>input_number</code> gesetzt wird (Schieberegler im Frontend). Über ein <code>input_boolean</code> (Ein-/Ausschalter im Frontend) wird dann eine Automatisierung ausgeführt, die den Timer startet (<code>service: timer.start</code>) und das Modbus Register 2818 auf den Wert <code>5</code> (HKR1 Standbymodus) schreibt.</p>
<p>Wenn der Timer abgelaufen ist, startet eine zweite Automatisierung (getriggert durch <code>event_type: timer.finished</code>) die dann den Ein-/Ausschalter wieder auf "Aus" setzt.</p>
<p>Durch das setzen des Ein-Ausschalters auf "Aus" durch diese Automatisierung wird wiederum eine weitere Automatisierung getriggert die dann zum Einen das Modbus-Register 2818 wieder auf <code>2</code> (Automatik) setzt, also den Heizkreis wieder in den normalen Automatikmodus versetzt. Der zweite Anwendungsfall ist das manuelle Umschalten des Ein-/Ausschalters in der Weboberfläche auf "Aus" um wieder manuell auf "Automatik" umzuschalten. Auch hier triggert diese Automatisierung. </p>
<h3 id="konfiguration-home-assistant">Konfiguration Home-Assistant<a class="headerlink" href="#konfiguration-home-assistant" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="x"># Eingabefelder </span>
<span class="x">input_number:</span>
<span class="x">  delayheizungstandby:</span>
<span class="x">    name: Stunden auf Standby</span>
<span class="x">    initial: 5</span>
<span class="x">    min: 1</span>
<span class="x">    max: 8</span>
<span class="x">    step: 1</span>
<span class="x">    icon: mdi:timer</span>

<span class="x">input_boolean:</span>
<span class="x">  heizungstandbyon:</span>
<span class="x">    name: Heizung stundenweise auf Standby</span>
<span class="x">    initial: off</span>


<span class="x"># Timer for setting heating on standby for x hours</span>
<span class="x">timer:</span>
<span class="x">  heizungaufstandbyfor:</span>
<span class="x">    name: Noch auf Standby für</span>


<span class="x">automation:</span>

<span class="x">  - alias: Heizung auf Standby Start</span>
<span class="x">    trigger:</span>
<span class="x">      platform: state</span>
<span class="x">      entity_id: input_boolean.heizungstandbyon</span>
<span class="x">      to: &#39;on&#39;</span>
<span class="x">    action:</span>
<span class="x">    -  service: timer.start</span>
<span class="x">       entity_id: timer.heizungaufstandbyfor</span>
<span class="x">       data_template:</span>
<span class="x">         duration: &quot;</span><span class="cp">{{</span> <span class="nv">states</span><span class="o">(</span><span class="s1">&#39;input_number.delayheizungstandby&#39;</span><span class="o">)</span> <span class="o">|</span> <span class="nf">int</span> <span class="o">*</span> <span class="m">60</span> <span class="o">*</span> <span class="m">60</span> <span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">    - service: modbus.write_register</span>
<span class="x">      data:</span>
<span class="x">        address: 2818</span>
<span class="x">        hub: SolvisRemote</span>
<span class="x">        unit: 1</span>
<span class="x">        value: 5    </span>


<span class="x">  - alias: Heizung Standby To Automatic</span>
<span class="x">    trigger:</span>
<span class="x">      platform: state</span>
<span class="x">      entity_id: input_boolean.heizungstandbyon</span>
<span class="x">      to: &#39;off&#39;</span>
<span class="x">    action:</span>
<span class="x">    - service: timer.cancel</span>
<span class="x">      entity_id: timer.heizungaufstandbyfor</span>
<span class="x">    - service: modbus.write_register</span>
<span class="x">      data:</span>
<span class="x">        address: 2818</span>
<span class="x">        hub: SolvisRemote</span>
<span class="x">        unit: 1</span>
<span class="x">        value: 2</span>


<span class="x">  - alias: Heizung Standby Timer Finished</span>
<span class="x">    trigger:</span>
<span class="x">      platform: event</span>
<span class="x">      event_type: timer.finished</span>
<span class="x">      event_data:</span>
<span class="x">        entity_id: timer.heizungaufstandbyfor</span>
<span class="x">    action:</span>
<span class="x">    - service: input_boolean.turn_off</span>
<span class="x">      data:</span>
<span class="x">        entity_id: input_boolean.heizungstandbyon</span>
</code></pre></div>
</td></tr></table>
<h2 id="links-zu-solvis-doku">Links zu Solvis Doku<a class="headerlink" href="#links-zu-solvis-doku" title="Permanent link">&para;</a></h2>
<p><a href="https://solvis-files.s3.eu-central-1.amazonaws.com/seiten/produkte/solvisremote/Download/SolvisRemote+Modbus+Spezifikationen+201906.pdf">Doku: Solvis Modbus Register</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../sidewinder-x1-led-2/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Zurück
                </span>
                Artillery Sidewinder X1 LED Statusbeleuchtung
              </div>
            </div>
          </a>
        
        
          <a href="../stromverbrauch/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Weiter
                </span>
                (digitalen) Stromzähler mit ESP8266 auslesen
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright 2019-2021 - saruter. Creative Commons Attribution 4.0.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/saruter" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/saruter" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "In Zwischenablage kopieren", "clipboard.copied": "In Zwischenablage kopiert", "search.config.lang": "de", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Suche", "search.result.placeholder": "Suchbegriff eingeben", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.term.missing": "Es fehlt"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['instant', 'tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>